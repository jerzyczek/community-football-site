<div data-sort="{{ post.id }}" class="col-md-12 no-gutters border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative postItem" data-postid="{{ post.id }}">
    <div class="row">
        <div class="col p-4 flex-column position-static">
            {% if post.user.id == app.user.id %}
                <div class="postActions float-right">
                    <a class="postDelete text-success" data-toggle="modal" data-postid="{{ post.id }}" data-posttoken="{{ csrf_token('delete' ~ post.id) }}" data-target="#editPostModal">
                        <i class="fa fa-edit"></i>
                    </a>
                    <a class="postDelete text-danger" data-toggle="modal" data-postid="{{ post.id }}" data-posttoken="{{ csrf_token('delete' ~ post.id) }}" data-target="#deletePostModal">
                        <i class="fa fa-trash"></i>
                    </a>

                </div>
            {% endif %}
            <strong class="d-inline-block mb-2 text-success">{{ post.getUser().getFullName() }}</strong>
            <h3 class="mb-0">{{ post.title }}</h3>
            <div class="mb-1 text-muted">{{ post.createdAt|date('M d H:i') }}</div>
            <p class="mb-auto">
                {% if post.content|length < 250 %}
                    here
                    {{ post.content }}
                {% else %}
                    {{ post.content|slice(0, 250)}}<span class="morePostContent">{{post.content|slice(250, post.content|length) }}</span><span class="dots">...</span>
                    <a href="#" class="morePostContentToggle stretched-link d-inline-block">Show more</a>
                    {#</span>#}
                {% endif %}
            </p>
            <hr>
            <small class="reactionActions">
                {% if post.isUserLikePost(app.user) %}
                    <a class="unlikePost" >
                        <i class="fa fa-thumbs-down"></i>
                        <span>Unlike it</span>
                    </a>
                {% else %}
                    <a class="likePost">
                        <i class="fa fa-thumbs-up"></i>
                        <span>Like it!</span>
                    </a>
                {% endif %}
                <b>{{ post.reactions|length }}</b>
                {#<a href="" class="responseLink">Response</a>&nbsp;#}
            </small>
        </div>


        <div class="col-md-12 no-gutter comments-list">
            {% if post.getComments()|length > 0 %}

                <div class="page-header">
                    <h1>Comments<small class="float-right">{{ post.getComments()|length }} comments</small></h1>
                </div>
                {% if post.getComments()|length > 2 %}<a href="#" class="showMoreComments" data-action="show">Show Previous Comments</a> {% endif %}
                {% for key, comment in post.getComments()%}
                    <div class="border-bottom comment {% if key < post.getComments()|length - 2  %}extraComment{% endif %}"
                         id="commentid{{ comment.id }}" data-commentid="{{ comment.id }}">
                        <div class="media px-4 pt-4">

                            <a class="media-left">
                                <img class="rounded-circle" src="http://lorempixel.com/40/40/people/1/">
                            </a>
                            <div class="media-body ml-4">
                                <h4 class="media-heading user_name">{{ comment.getUser().getFullName() }}</h4>

                                <p class="text-body flex-md-wrap">{{ comment.content }}</p>
                                <small class="reactionActions">
                                    {% if comment.isUserLikeComment(app.user) %}
                                        <a class="unlikeComment" ><i class="fa fa-thumbs-down"></i></a>
                                    {% else %}
                                        <a class="likeComment"><i class="fa fa-thumbs-up"></i></a>
                                    {% endif %}
                                    <b>{{ comment.reactions|length }}</b> -
                                    <a href="" class="responseLink">Response</a>&nbsp;
                                </small>
                                {% if comment.user.getId() == app.user.getId() %}
                                    <div class="dropdown">
                                        <a class="dropdown-toggle" data-toggle="dropdown"></a>
                                        <div class="dropdown-menu">
                                            <a class="dropdown-item commentDelete" data-toggle="modal" data-commentid="{{ comment.id }}" data-commenttoken="{{ csrf_token('delete' ~ comment.id) }}" data-target="#deleteCommentModal">
                                                <i class="fa fa-trash">&nbsp;Delete</i>
                                            </a>
                                        </div>
                                    </div>
                                {% endif %}
                            </div>
                            <p class="float-right"><small>{{ comment.getCreatedAt()|time_diff ? : 'just now' }}</small></p>
                        </div>
                        <div class="col-md-12 form-group commentResponse" >
                            <textarea class="form-control commentField rounded-top rounded-bottom " placeholder="Enter a Comment" ></textarea>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}
        </div>

        <div class="col-md-12 input-group postResponse mb-3" role="group">
            <img class="rounded-circle" src="http://lorempixel.com/40/40/people/1/">
            <textarea class="form-control commentField rounded-top rounded-bottom" placeholder="Enter a Comment" ></textarea>
        </div>
    </div>
</div>


{{ include('post/modals/delete.html.twig') }}
{{ include('comment/modals/delete.html.twig') }}